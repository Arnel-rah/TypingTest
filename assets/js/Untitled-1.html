<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Language Switch Test</title>
    <style>
      .language-selector {
        position: absolute;
        top: 10px;
        right: 10px;
      }

      #languageToggle {
        padding: 8px 12px;
        border: none;
        background: #222;
        color: white;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
      }

      h1,
      p,
      button {
        font-family: sans-serif;
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <div class="language-selector">
      <button id="languageToggle">
        <span id="flagIcon">ðŸ‡«ðŸ‡·</span>
        <span id="languageCode">FR</span>
      </button>
    </div>

    <h1 data-i18n="welcome"></h1>
    <p data-i18n="choose_difficulty"></p>
    <button data-i18n="easy"></button>
    <button data-i18n="medium"></button>
    <button data-i18n="hard"></button>

    <script>
      const translations = {
        fr: {
          welcome: "BIENVENU AU VANILLA TYPING",
          choose_difficulty: "Choisissez le niveau de difficultÃ© du test",
          easy: "Facile",
          medium: "Ordinaire",
          hard: "Dur",
        },
        en: {
          welcome: "WELCOME TO VANILLA TYPING",
          choose_difficulty: "Choose the test difficulty level",
          easy: "Easy",
          medium: "Medium",
          hard: "Hard",
        },
      };

      function applyLanguage(lang) {
        const elements = document.querySelectorAll("[data-i18n]");
        elements.forEach((el) => {
          const key = el.getAttribute("data-i18n");
          if (translations[lang] && translations[lang][key]) {
            el.textContent = translations[lang][key];
          }
        });

        const flagIcon = document.getElementById("flagIcon");
        const languageCode = document.getElementById("languageCode");

        if (flagIcon && languageCode) {
          flagIcon.textContent = lang === "fr" ? "ðŸ‡«ðŸ‡·" : "ðŸ‡¬ðŸ‡§";
          languageCode.textContent = lang.toUpperCase();
        }

        localStorage.setItem("lang", lang);
        document.documentElement.setAttribute("lang", lang);
      }

      window.addEventListener("DOMContentLoaded", () => {
        const savedLang = localStorage.getItem("lang") || "fr";
        applyLanguage(savedLang);

        const toggleBtn = document.getElementById("languageToggle");
        toggleBtn.addEventListener("click", () => {
          const currentLang = localStorage.getItem("lang") || "fr";
          const newLang = currentLang === "fr" ? "en" : "fr";
          applyLanguage(newLang);
        });
      });
    </script>
  </body>
</html>
